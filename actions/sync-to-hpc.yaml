---
name: sync2hpc
pack: umccr
description: Sync data to the HPC
enabled: false
runner_type: mistral-v2
entry_point: workflows/sync-to-hpc.yaml
notify:
  on-complete:
    message: "Overwrite to silence the default notification route."
    routes:
      - "foo"
parameters:
  runfolder_name:
    description: "The name (not full path) of the runfolder to sync."
    required: true
    type: string
  source_path:
    description: "The path to sync. Should end in (and include!) the runfolder name."
    required: false
    type: string
    default: "{{ st2kv.system.runfolder.base.path }}/{{ runfolder_name }}/ {{ st2kv.system.bcl2fastq.output.base.path }}/{{ runfolder_name }}/"
  excludes:
    description: "exclude option(s) to provide to the rsync command."
    required: false
    type: string
    default: "--exclude Data --exclude Thumbnail_Images"
  dest_host:
    description: "The host to sync to"
    required: false
    type: string
    default: "{{ st2kv.system.hpc.copy.host }}"
  dest_path:
    description: "Base path for pipeline output on the respective destination host. A sub-dir structure according to UMCCR definitions is expected."
    required: false
    type: string
    default: "{{ st2kv.system.pipeline.data.base.path }}"
  rsync_ssh_user:
    description: "The ssh user to run the rsync command with."
    required: false
    type: string
    default: "{{ st2kv.system.hpc.copy.user }}"
