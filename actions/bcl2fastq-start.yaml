---
name: bcl2fastq_start
pack: umccr
description: Action to start the bcl2fastq conversion.
enabled: false
entry_point: ''
notify:
  on-complete:
    message: "bcl2fastq conversion submitted!"
    routes:
      - "umccr_slack"
parameters:
  runfolder:
    required: true
    type: string
    description: The runfolder (full path) to convert
  output_dir:
    required: true
    type: string
    description: The output directory of the conversion
    default: '/storage/shared/bcl2fastq_output'
  extra_params:
    required: false
    type: string
    description: Additional bcl2fastq parameters.
  hosts:
    immutable: true
    default: 172.19.0.1
  port:
    immutable: true
    default: 2222
  username:
    immutable: true
    default: 'limsadmin'
  private_key:
    immutable: true
    default: '/home/stanley/.ssh/stanley_rsa'
  cmd:
    immutable: true
    default: "nohup /opt/arteria/run-bcl2fastq.sh -R {{runfolder}} -o {{output_dir}} -k {{st2kv.system.api.key.webhook}} {% if extra_params %}{{extra_params}}{% endif %} &"
  sudo:
    immutable: true
runner_type: "remote-shell-cmd"
